"use strict";(self.webpackChunkelfsquad=self.webpackChunkelfsquad||[]).push([[67],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=l(n),h=o,f=d["".concat(s,".").concat(h)]||d[h]||p[h]||i;return n?r.createElement(f,a(a({ref:t},u),{},{components:n})):r.createElement(f,a({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var l=2;l<i;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6515:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return l},toc:function(){return u},default:function(){return d}});var r=n(2122),o=n(9756),i=(n(7294),n(3905)),a=["components"],c={title:"User Authentication",sidebar_position:3},s=void 0,l={unversionedId:"authentication/user-authentication",id:"authentication/user-authentication",isDocsHomePage:!1,title:"User Authentication",description:"Before You Begin",source:"@site/docs/authentication/user-authentication.md",sourceDirName:"authentication",slug:"/authentication/user-authentication",permalink:"/docs/authentication/user-authentication",editUrl:"https://github.com/elfsquad/docs/edit/master/docs/authentication/user-authentication.md",version:"current",sidebarPosition:3,frontMatter:{title:"User Authentication",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Client Credentials",permalink:"/docs/authentication/client-credentials"},next:{title:"Overview",permalink:"/docs/APIs/"}},u=[{value:"Before You Begin",id:"before-you-begin",children:[]},{value:"Step 1: Direct the end user to the Elfsquad authentication page",id:"step-1-direct-the-end-user-to-the-elfsquad-authentication-page",children:[]},{value:"Step 2: Extracting the access token",id:"step-2-extracting-the-access-token",children:[]}],p={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"before-you-begin"},"Before You Begin"),(0,i.kt)("p",null,"Create a new OpenId client integration page in the ",(0,i.kt)("a",{parentName:"p",href:"https://ems.elfsquad.io/integration"},"Integrations page"),".\nWhen done succesfully, a newly created integration should show up.\nOpen the settings of the newly created integration.\nNote your client id.\nEnter a redirect url. The end user will be redirected to this url after a succesfull login."),(0,i.kt)("h2",{id:"step-1-direct-the-end-user-to-the-elfsquad-authentication-page"},"Step 1: Direct the end user to the Elfsquad authentication page"),(0,i.kt)("p",null,"At some point in the UI of your app, you will need to get the end user to log in, in order to gain consent to access Elfsquad's resources on the end user\u2019s behalf.\nYou can do this when the end user opens the app, or you may wait until your app actually needs to access Elfsquad's resources.\nIn either case, you will redirect the end user to the GET connect/authorize endpoint in their browser. For example, you could do this by providing a link for the end user:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'<a href="https://login.elfsquad.io/connect/authorize?client_id={CLIENT_ID}&redirect_uri={REDIRECT_URL}&response_type=token&scope=Elfskot.Api">Click here to login</a>\n')),(0,i.kt)("p",null,"Replace the ",(0,i.kt)("inlineCode",{parentName:"p"},"{CLIENT_ID}")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"{REDIRECT_URL}")," values in the example below with those specific to your OpenId Client."),(0,i.kt)("p",null,"Clicking on the link will take the end user to the Elfsquad login page.\nAfter the end user has succesfully logged in with valid credentials, the end user will be redirected back to your redirect url with the access token included as a fragment of the URL."),(0,i.kt)("h2",{id:"step-2-extracting-the-access-token"},"Step 2: Extracting the access token"),(0,i.kt)("p",null,"For example, let's say our redirect url is ",(0,i.kt)("a",{parentName:"p",href:"https://myapp.com/callback"},"https://myapp.com/callback"),".\nWhen this is the case, the user will be redirected to ",(0,i.kt)("a",{parentName:"p",href:"https://myapp.com/callback#access_token=eyabcdefghijk12345678&token_type=Bearer&expires_in=3600"},"https://myapp.com/callback#access_token=eyabcdefghijk12345678&token_type=Bearer&expires_in=3600")," after a succesfull login.\nNow all that is left, is to extract the access token (eyabcdefghijk12345678) from this url.\nOne example of how to do this, would be to serve a web page with some javascript at the redirect url:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<html>\n    <body>\n        <script>\n            let token = window.location.hash.match(/\\#(?:access_token)\\=([\\S\\s]*?)\\&/)[1];\n            alert("your access token is : " +token);\n        <\/script>\n    </body>\n</html>\n')),(0,i.kt)("p",null,"Your app will now be able to use this token to make calls to the Elfsquad API's on the end users behalf."))}d.isMDXComponent=!0}}]);